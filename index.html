<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      Manifest for web application
    </title>
    <script src="//www.w3.org/Tools/respec/respec-w3c-common" class="remove">
</script>
    <script class='remove'>
/**/
    var respecConfig = {
    specStatus: 'ED',
    shortName: 'appmanifest',
    subtitle: 'Living Document',
    edDraftURI: 'http://w3c.github.io/manifest/',
    previousMaturity: 'FPWD',
    previousURI: 'http://www.w3.org/TR/2013/WD-appmanifest-20131217/',
    editors: [{
        name: 'Contributors list available on GitHub',
        url:"https://github.com/w3c/manifest/graphs/contributors"
    }],
    wg: 'Web Applications (WebApps) Working Group',
    wgURI: 'http://www.w3.org/2008/webapps/',
    wgPublicList: 'public-webapps',
    wgPatentURI: 'http://www.w3.org/2004/01/pp-impl/42538/status',
    noLegacyStyle: true,
    otherLinks: [{
                key: 'Repository',
                data: [{
                value: 'We are on Github.',
                href: 'https://github.com/w3c/manifest'
            }, {
                value: 'File a bug.',
                href: 'https://github.com/w3c/manifest/issues'
            }, {
                value: 'Commit history.',
                href: 'https://github.com/w3c/manifest/commits/gh-pages'
            }, {
                value: 'Mailing list.',
                href: 'http://lists.w3.org/Archives/Public/public-webapps/'
            }]
        }, {
            key: "Implementation status",
            data: [{
                value: "Gecko",
                href: "https://bugzilla.mozilla.org/show_bug.cgi?id=997779"
            }, {
                value: "Blink",
                href: "https://code.google.com/p/chromium/issues/detail?id=366145"
            }]
        }],
    };
    </script>
  </head>
  <body>
    <section id='abstract'>
      <p>
        This specification defines a JSON-based manifest, which provides
        developers with a centralized place to put metadata associated with a
        web application. This includes, but is not limited to, the web
        application's name, links to icons, as well as the preferred URL to
        open when a user launches the web application. The manifest also allows
        developers to declare a default orientation for their web application,
        as well as providing the ability to set the display mode for the
        application (e.g., in fullscreen).
      </p>
      <p>
        Using this metadata, user agents can provide developers with means to
        create user experiences that are more comparable to that of a native
        application.
      </p>
      <p>
        In addition, this specification defines the <code>manifest</code> link
        type, which provides a declarative means for a document to be
        associated with a manifest.
      </p>
    </section>
    <section id="sotd">
      <p>
        Implementors need to be aware that this specification is extremely
        unstable. <strong>Implementors who are not taking part in the
        discussions will find the specification changing out from under them in
        incompatible ways.</strong> Vendors interested in implementing this
        specification before it eventually reaches the Candidate Recommendation
        phase should <a href="https://github.com/w3c/manifest/issues">subscribe
        to the repository on GitHub</a> and take part in the discussions.
      </p>
    </section>
    <section class="informative">
      <h2>
        Usage Examples
      </h2>
      <p>
        This section shows how developers can make use of the various features
        of this specification.
      </p>
      <section class="informative">
        <h3>
          Example manifest
        </h3>
        <p>
          The following shows a typical <a>manifest</a>.
        </p>
        <pre class="example highlight json" title="typical manifest">
{
  "name": "Super Racer 2000",
  "icons": [{
        "src": "icon/lowres",
        "sizes": "64x64",
        "type": "image/webp"
      }, {
        "src": "icon/hd_small",
        "sizes": "64x64"
      }, {
        "src": "icon/hd_hi",
        "sizes": "128x128",
        "density": "2"
      }],
  "start_url": "/start.html",
  "display": "fullscreen",
  "orientation": "landscape"
}
</pre>
      </section>
      <section class="informative">
        <h3>
          Using a <code>link</code> element to link to a manifest
        </h3>
        <p>
          Example of using a <code>link</code> element to associate a website
          with a <a>manifest</a>. The example also shows how to use [[!HTML]]'s
          <code>link</code> and <code>meta</code> elements to give the web
          application a fallback name and set of icons.
        </p>
        <pre class="example highlight html" title="linking to a manifest">
&lt;!doctype&gt;
&lt;html&gt;
&lt;title&gt;Store finder - search&lt;/title&gt;

&lt;!-- Startup configuration --&gt;
&lt;link rel="manifest" href="manifest.json"&gt;

&lt;!-- Fallback application metadata for legacy browsers --&gt;
&lt;meta name="application-name" content="Store Finder"&gt;
&lt;link rel="icon" sizes="16x16 32x32 48x48" href="lo_def.ico"&gt;
&lt;link rel="icon" sizes="512x512" href="hi_def.png"&gt;
</pre>
      </section>
    </section>
    <section>
      <h2>
        Use cases and requirements
      </h2>
      <p>
        This document attempts to address the <cite><a href=
        "http://w3c-webmob.github.io/installable-webapps/">Use Cases and
        Requirements for Installable Web Apps</a></cite>.
      </p>
    </section>
    <section>
      <h2>
        Common conventions and dependencies
      </h2>
      <p id="ecmascript-abstractop">
        The <dfn><a href=
        "http://people.mozilla.org/~jorendorff/es6-draft.html#sec-ordinary-object-internal-methods-and-internal-slots-getownproperty-p">
        [[\GetOwnProperty]]</a></dfn> operation and the abstract operation
        <dfn><a href=
        "http://people.mozilla.org/~jorendorff/es6-draft.html#sec-hasownproperty">
        hasOwnProperty</a></dfn>, <dfn title="parseFloat"><a href=
        "http://people.mozilla.org/~jorendorff/es6-draft.html#sec-parsefloat-string">
        parseFloat(string)</a></dfn> function, and the <a class="external"
        href="http://people.mozilla.org/~jorendorff/es6-draft.html#sec-ecmascript-data-types-and-values">
        <dfn>Type</dfn>(<var>x</var>)</a> notation are defined in
        [[!ECMASCRIPT]].
      </p>
      <p>
        When instructed to <dfn>Trim</dfn>(<var>x</var>), a user agent MUST
        behave as if [[!ECMASCRIPT]]'s <a href=
        "https://people.mozilla.org/~jorendorff/es6-draft.html#sec-string.prototype.trim">
        String.prototype.trim()</a> function had been called on the string
        <var>x</var>.
      </p>
      <p>
        As the manifest uses the JSON format, this specification relies on the
        types defined in [[!ECMA-404]] specification: namely <dfn title=
        "json-object">object</dfn>, <dfn title="json-array">array</dfn>,
        <dfn title="json-number">number</dfn>, <dfn title=
        "json-string">string</dfn>, <code>true</code>, <code>false</code>, and
        <code>null</code>. Strict type checking is not enforced by this
        specification. Instead, each member's definition specifies the steps
        required to process a particular member and what to do when a type does
        not match what is expected.
      </p>
    </section>
    <section>
      <h2>
        Display modes
      </h2>
      <p>
        A <dfn>display mode</dfn> represents how developers would like the user
        agent to present the web application to a user (e.g., in fullscreen).
        Display modes correspond to user interface (UI) metaphors and
        functionality in use on a given platform. The UI conventions of the
        display modes are purely advisory and implementers are free to
        interpret them how they best see fit.
      </p>
      <p>
        Once a user agent applies a particular <a>display mode</a> to a web
        application, it becomes the <dfn>default display mode</dfn> for the
        <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
        top-level browsing context</a> (i.e., it is used as the display mode
        when the window is <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#navigate">navigated</a>).
        The user agent MAY override the <a>default display mode</a> for
        security reasons (e.g., the <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
        top-level browsing context</a> is <a href=
        "http://www.whatwg.org/specs/web-apps/current-work/#navigate">navigated</a>
        to another origin) and/or the user agent MAY provide the user with a
        means of switching to another <a>display mode</a>.
      </p>
      <p>
        When the <code>display</code> member is missing, or if there is no
        valid <code>display</code> member, the user agent uses the
        <code>browser</code> <a>display mode</a> as the <a>default display
        mode</a>. As such, the user agent is REQUIRED to support the
        <code>browser</code> <a>display mode</a>.
      </p>
      <p>
        Each <a>display mode</a>, except <code>browser</code>, has a recursive
        <dfn>fallback display mode</dfn>, which is the <a>display mode</a> that
        the user agent can try to use if it doesn't support a particular
        <a>display mode</a>. If the user agent does support a fallback display
        mode, then it checks to see if it can use that display mode's fallback
        display mode. This creates a fallback chain, with the <a>default
        display mode</a> (<code>browser</code>) being the last item in the
        chain.
      </p>
      <div class="example">
        <p>
          For example, Awesome Browser only supports the
          <code>minimal-ui</code> and <code>browser</code> display modes, but
          developer declares that she wants <code>fullscreen</code> in the
          manifest. In this case, the user agent will first check if it
          supports <code>fullscreen</code> (it doesn't), then fall back to
          <code>standalone</code> (which it also doesn't support), and
          ultimately fall back to <code>minimal-ui</code>.
        </p>
      </div>
      <p>
        The <dfn>display modes values</dfn> and their corresponding <a title=
        "fallback display mode">fallback display modes</a> are as follows:
      </p>
      <dl>
        <dt>
          <dfn id="dm-fullscreen">fullscreen</dfn>
        </dt>
        <dd>
          Opens the web application without any user agent chrome and takes up
          the entirety of the available display area.
        </dd>
        <dd>
          The <a>fallback display mode</a> for <code>fullscreen</code> is
          <code>standalone</code>.
        </dd>
        <dt>
          <dfn id="dm-standalone">standalone</dfn>
        </dt>
        <dd>
          Opens the web application to look and feel like a standalone native
          application. This can include the application having a different
          window, its own icon in the application launcher, etc. In this mode,
          the user agent will exclude UI elements for controlling navigation,
          but can include other UI elements such as a status bar.
        </dd>
        <dd>
          The <a>fallback display mode</a> for <code>standalone</code> is
          <code>minimal-ui</code>.
        </dd>
        <dt>
          <dfn id="dm-minimal-ui">minimal-ui</dfn>
        </dt>
        <dd>
          This mode is similar to <a>fullscreen</a>, but provides the end-user
          with some means to access a minimal set of UI elements for
          controlling navigation (i.e., back, forward, reload, and perhaps some
          way of viewing the document's address). A user agent can include
          other platform specific UI elements, such as "share" and "print"
          buttons or whatever is customary on the platform and user agent.
        </dd>
        <dd>
          The <a>fallback display mode</a> for <code>minimal-ui</code> is
          <code>browser</code>.
        </dd>
        <dt>
          <dfn id="dm-browser">browser</dfn>
        </dt>
        <dd>
          Opens the web application using the platform-specific convention for
          opening hyperlinks in the user agent (e.g., in a browser tab or a new
          window).
        </dd>
        <dd>
          The <code>browser</code> <a>display mode</a> doesn't have a
          <a>fallback display mode</a> (conforming user agents are required to
          support the <code>browser</code> <a>display mode</a>).
        </dd>
      </dl>
      <p class="note">
        The <a>fullscreen</a> <a>display mode</a> is orthogonal to, and works
        independently of, the [[FULLSCREEN]] API. The
        <a><code>fullscreen</code></a> <a>display mode</a> affects the
        fullscreen state of the browser window, while the [[FULLSCREEN]] API
        operates on an element contained within the viewport. As such, a web
        application can have its <a>display mode</a> set to
        <a><code>fullscreen</code></a>, while
        <code>document.fullScreenElement</code> returns <code>null</code>, and
        <code>fullscreenEnabled</code> returns <code>false</code>.
      </p>
    </section>
    <section>
      <h3>
        Associating a resource with a manifest
      </h3>
      <p>
        A resource is said to be <dfn>associated with a manifest</dfn> if the
        resource representation, an HTML document, has a <a href=
        "#linking"><code>manifest</code> link relationship</a>, or the resource
        has a <a>well-known manifest</a>.
      </p>
      <section id="linking">
        <h3>
          Linking to a manifest
        </h3>
        <p>
          The <code>manifest</code> keyword can be used with a [[!HTML]]
          <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#the-link-element">
          link</a> element. This keyword creates an <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#external-resource-link"
          title="external resource link">external resource link</a>.
        </p>
        <table border="1">
          <tr>
            <th rowspan="2">
              Link type
            </th>
            <th colspan="2">
              Effect on...
            </th>
            <th rowspan="2">
              Brief description
            </th>
          </tr>
          <tr>
            <th>
              <code><a href="#the-link-element">link</a></code>
            </th>
            <th>
              <code><a href="#the-a-element">a</a></code> and <code><a href=
              "#the-area-element">area</a></code>
            </th>
          </tr>
          <tr>
            <td>
              <code><dfn title="rel-manifest" id=
              "rel-manifest">manifest</dfn></code>
            </td>
            <td>
              <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#external-resource-link"
              title="external resource link">External Resource</a>
            </td>
            <td>
              not allowed
            </td>
            <td>
              Imports or links to a <a>manifest</a>.
            </td>
          </tr>
        </table>
        <p>
          The <a>media type for a manifest</a> serves as the default media type
          for resources associated with the <code><a href=
          "#rel-manifest">manifest</a></code> <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#linkTypes">link
          type</a>.
        </p>
        <p class="note">
          In cases where more than one <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#the-link-element">
          <code>link</code></a> element with a <code>manifest</code> link type
          appears in a <code>Document</code>, the user agent uses the first
          link element in tree order and ignores all subsequent <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#the-link-element">
          <code>link</code></a> elements with a <code>manifest</code> link type
          (even if the first element was erroneous). See the <a>steps for
          obtaining a manifest</a>.
        </p>
        <p>
          To obtain a manifest, the user agent MUST run the <a>steps for
          obtaining a manifest</a>. The appropriate time to obtain the manifest
          is left up to implementations. A user agent MAY opt to delay fetching
          a manifest until after the document and its other resources have been
          fully loaded (i.e., to not delay the availability of content and
          scripts required by the <code>document</code>).
        </p>
        <p>
          A <a>manifest</a> is obtained and applied regardless of the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#attr-link-media">
          <code>media</code></a> attribute of the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#the-link-element">
          <code>link</code></a> matches the environment or not.
        </p>
      </section>
      <section>
        <h3>
          The "manifest.json" well-known URI
        </h3>
        <p>
          The <dfn>well-known manifest</dfn> is a manifest resource located at
          standardized URI. This specification registers the "manifest.json"
          well-known URI in the <a href=
          "http://www.iana.org/assignments/well-known-uris/well-known-uris.xml">
          Well-Known URI Registry</a> as required by [[!RFC5785]].
        </p>
        <div class="example">
          <p>
            An example of a <a href="#dfn-well-known-manifest" class=
            "internalDFN">well-known manifest</a>:
          </p>
          <ul>
            <li>
              <code>http://example.com/.well-known/manifest.json</code>
            </li>
          </ul>
        </div>
      </section>
    </section>
    <section>
      <h2>
        Manifest
      </h2>
      <p>
        A <dfn>manifest</dfn> is a JSON document that contains startup
        parameters and application defaults for when a web application is
        launched. A manifest consists of a top-level <a href=
        "#json-object">object</a> that contains zero or more members. Each of
        the members are defined below, as well as how their values are
        processed.
      </p>
      <section>
        <h3>
          Obtaining a manifest
        </h3>
        <p>
          The <dfn>steps for obtaining a manifest</dfn> are given by the
          following algorithm. The algorithm, if successful, returns a
          <a>processed manifest</a>. In running these steps, a user agent MUST
          NOT <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#delay-the-load-event">
          delay the load event</a>.
        </p>
        <ol>
          <li>From the <code>Document</code> of the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
            top-level browsing context</a>, let <var>manifest link</var> be the
            first <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/#the-link-element">
            <code>link</code></a> element in <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/#tree-order">tree
            order</a> whose <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/#attr-link-rel"><code>
            rel</code></a> attribute contains the token <code>manifest</code>.
          </li>
          <li>If <var>manifest link</var> is not <code>null</code>:
            <ol>
              <li>Honoring the <code>manifest-src</code> [[!CSP]] directive,
              <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#concept-link-obtain">
                obtain a resource</a> as per [[!HTML]]. If the <a href=
                "http://www.whatwg.org/specs/web-apps/current-work/multipage/semantics.html#concept-link-obtain">
                obtain a resource</a> algorithm terminates prematurely, or is
                denied by [[!CSP]], terminate this algorithm.
              </li>
              <li>Let <var>response</var> be a [[!FETCH]] the <a href=
              "http://fetch.spec.whatwg.org/#concept-response">response</a>
              resulting obtained resource.
              </li>
            </ol>
          </li>
          <li>Otherwise, if <var>manifest element</var> is <code>null</code>:
            <ol>
              <li>Let <var>url</var> be the result of resolving the URL
              "<code>/.well-known/manifest.json</code>" using the <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
                top-level browsing context's</a> <a href=
                "http://www.whatwg.org/specs/web-apps/current-work/#the-document's-address">
                address</a> as the base.
              </li>
            </ol>
          </li>
          <li>Using the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/multipage/webappapis.html#networking-task-source">
            networking task source</a>, <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/#queue-a-task">queue
            a task</a> to perform the following:
            <ol>
              <li>Let <var>req</var> be a new [[!FETCH]] <a href=
              "http://fetch.spec.whatwg.org/#concept-request" title=
              "concept-request">request</a>.
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-context">context</a>
              to be "manifest".
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-url">url</a> to be
              <var>url</var>.
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-origin" title=
              "concept-request-origin">origin</a> to be the <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#origin">origin</a>
              of the <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
                top-level browsing context</a>.
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-mode">mode</a> to
              be "CORS".
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-referrer" title=
              "concept-request-referrer">referrer</a> to be the
              <code>Document</code> of the <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
                top-level browsing context</a>.
              </li>
              <li>Set <var>req</var>'s <a href=
              "http://fetch.spec.whatwg.org/#concept-request-omit-credentials-mode">
                omit credentials mode</a> to "always".
              </li>
              <li>
                <a href="http://fetch.spec.whatwg.org/#concept-fetch">Fetch</a>
                <var>req</var> and let <var>response</var> be the <a href=
                "http://fetch.spec.whatwg.org/#concept-response">response</a>.
              </li>
              <li>If <var>response</var> is a <a href=
              "http://fetch.spec.whatwg.org/#concept-network-error">network
              error</a>, terminate this algorithm.
              </li>
            </ol>
          </li>
          <li>Let <var>manifest</var> be the result of running the <a>steps for
          processing a manifest</a> with <var>response</var>'s <a href=
          "http://fetch.spec.whatwg.org/#concept-request-body">body</a> as the
          <var>text</var>, and <var>url</var> as the <var>manifest URL</var>,
          the URL the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
            top-level browsing context's</a> address.
          </li>
          <li>Return <var>manifest</var>.
          </li>
        </ol>
        <div class="note">
          <p>
            Authors are encouraged to use the HTTP cache directives to
            explicitly cache the manifest. For example, the following response
            would cause a cached manifest to be used one year from the time the
            response is sent:
          </p>
          <pre class="highlight">
HTTP/1.1 200 OK
Cache-Control: max-age=31536000
Content-Type: application/manifest+json

{
  "name": "Super Racer 2000",
  "start_url": "/start.html",
  "display": "fullscreen",
  "orientation": "landscape"
}
          
</pre>
        </div>
      </section>
      <section>
        <h3>
          Processing the manifest
        </h3>
        <p>
          When instructed to <dfn>issue a developer warning</dfn>, the user
          agent MAY report the conformance violation to the developer in a
          user-agent-specific manner (e.g., report the problem in an error
          console), or MAY ignore the error and do nothing.
        </p>
        <p>
          When instructed to <dfn>ignore</dfn>, the user agent MUST act as if
          whatever member or value caused the condition was absent from the
          manifest document.
        </p>
        <p>
          The following algorithm provides an <dfn>extension point</dfn>: other
          specifications that add new members to the manifest are encouraged to
          hook themselves into this specification at this point in the
          algorithm.
        </p>
        <div class="note">
          <p>
            The <a>extension point</a> is meant to help avoid <a href=
            "http://annevankesteren.nl/2014/02/monkey-patch">issues related to
            monkey patching</a>.
          </p>
        </div>
        <p>
          The <dfn>steps for processing a manifest</dfn> are given by the
          following algorithm. The algorithm takes a <var>text</var> string as
          an argument, which represents a <a>manifest</a>, and a <var>manifest
          URL</var> [[!URL]], which represents the location of the manifest,
          and a <var>doc URL</var> [[!URL]]. The output from inputting an JSON
          document into this algorithm is a <dfn>processed manifest</dfn>.
        </p>
        <ol>
          <li>Let <var>parsed manifest</var> be an empty object.
          </li>
          <li>Let <var>manifest</var> be the result of <a href=
          "https://people.mozilla.org/~jorendorff/es6-draft.html#sec-json.parse">
            parsing</a> <var>text</var>. If <a href=
            "https://people.mozilla.org/~jorendorff/es6-draft.html#sec-json.parse">
            parsing</a> throws an error:
            <ol>
              <li>
                <a>Issue a developer warning</a> with any details pertaining to
                the JSON parsing error.
              </li>
              <li>Set <var>manifest</var> to be the result of <a href=
              "https://people.mozilla.com/~jorendorff/es6-draft.html#sec-15.12.2">
                parsing</a> the string <code>"{}"</code>.
              </li>
            </ol>
          </li>
          <li>
            <a>Extension point</a>: process any proprietary and/or other
            supported members at this point in the algorithm.
          </li>
          <li>Let <var>start URL</var> of <var>parsed manifest</var> be the
          result of running the <a>steps for processing the
          <code>start_url</code> member</a> with <var>manifest URL</var> and
          <var>doc URL</var>.
          </li>
          <li>Let <var>display mode</var> of <var>parsed manifest</var> be the
          result of running the <a>steps for processing the
          <code>display</code> member</a> with <var>manifest</var> as the
          argument.
          </li>
          <li>Let <var>orientation</var> of <var>parsed manifest</var> be the
          result of running the <a>steps for processing the
          <code>orientation</code> member</a> with <var>manifest</var> and
          <var>display mode</var> as arguments.
          </li>
          <li>Let <var>name</var> of <var>parsed manifest</var> be the result
          of running the <a>steps for processing the <code>name</code>
          member</a>.
          </li>
          <li>Let <var>short name</var> of <var>parsed manifest</var> be the
          result of running the <a>steps for processing the
          <code>short_name</code> member</a>.
          </li>
          <li>Let <var>icons</var> of <var>parsed manifest</var> be the result
          of running the <a>steps for processing the <code>icons</code>
          member</a>.
          </li>
          <li>Return <var>parsed manifest</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          Updating the manifest
        </h3>
        <p>
          A user agent MAY periodically check if the contents of a manifest has
          been modified (e.g., by honoring HTTP cache directives associated
          with the manifest or by checking for updates after the web
          application has been launched). In the event that the members of the
          manifest have been updated, as determined by running the <a>steps for
          processing a manifest</a> and seeing if anything has changed, the
          user agent MAY update the metadata corresponding to the web
          application (e.g., by updating or discarding the name, icons, or
          whatever other members have been changed).
        </p>
        <p>
          In addition, even if the manifest has not been modified, the user
          agents MAY periodically check if resources referenced from a manifest
          (e.g., the icons) have been modified by honoring HTTP cache
          directives. If any resources have been modified, the user agent MAY
          replace any stale resources.
        </p>
        <p>
          To avoid one application masquerading as another, it is RECOMMENDED
          that users be made aware of any such updates using implementation or
          platform specific conventions.
        </p>
      </section>
      <section>
        <h3>
          <code title="">name</code> member
        </h3>
        <p>
          The <dfn id="member-name"><code>name</code></dfn> member is a
          <a title="json-string">string</a> that represents the name of the web
          application as it is usually displayed to the user (e.g., amongst a
          list of other applications, or as a label for an icon).
        </p>
        <p class="note">
          For all intents and purposes, the <code><a href=
          "#member-name">name</a></code> member is functionally equivalent to
          having a <code><a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#the-meta-element">
          meta</a></code> element whose <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#attr-meta-name">name</a>
          attribute is <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#meta-application-name">
          <code>application-name</code></a> in a [[!HTML]] document. In cases
          where no suitable name can be derived from processing a manifest,
          [[!HTML]]'s <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#meta-application-name">
          application-name</a> or the <code><a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#the-title-element">
          title</a></code> element serve as suitable fallbacks.
        </p>
        <p>
          The <dfn>steps for processing the name member</dfn> is given by the
          following algorithm. The algorithm takes a <var>manifest</var> as an
          argument. This algorithm returns a string or <code>undefined</code>.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>manifest</var>
          with argument "<code>name</code>".
          </li>
          <li>If <a>Type</a>(<var>value</var>) is not "string":
            <ol>
              <li>If <a>Type</a>(<var>value</var>) is not "undefined",
              optionally <a>issue a developer warning</a> that the type is not
              supported.
              </li>
              <li>Return <code>undefined</code>.
              </li>
            </ol>
          </li>
          <li>Otherwise, <a>Trim</a>(<var>value</var>) and return the result.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code title="">short_name</code> member
        </h3>
        <p>
          The <dfn id="member-short_name"><code>short_name</code></dfn> member
          is a <a title="json-string">string</a> that represents a short
          version of the name of the web application. It is intended to be used
          where there is insufficient space to display the full name of the web
          application.
        </p>
        <p>
          The <dfn>steps for processing the short name member</dfn> is given by
          the following algorithm. The algorithm takes a <var>manifest</var> as
          an argument. This algorithm returns a string or
          <code>undefined</code>.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>manifest</var>
          with argument "<code>short_name</code>".
          </li>
          <li>If <a>Type</a>(<var>value</var>) is not "string":
            <ol>
              <li>If <a>Type</a>(<var>value</var>) is not "undefined",
              optionally <a>issue a developer warning</a> that the type is not
              supported.
              </li>
              <li>Return <code>undefined</code>.
              </li>
            </ol>
          </li>
          <li>Otherwise, <a>Trim</a>(<var>value</var>) and return the result.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code title="">icons</code> member
        </h3>
        <p>
          The <dfn id="member-icons"><code>icons</code></dfn> member is an
          <a title="json-array">array</a> of <a title="icon object">icon
          objects</a> that can serve as iconic representations of the web
          application in various contexts. For example, they can be used to
          represent the web application amongst a list of other applications,
          or to integrate the web application with an <abbr title=
          "operating system">OS</abbr>'s task switcher and/or system
          preferences.
        </p>
        <p class="note">
          If no icons are listed in the manifest (or none of them are found to
          be suitable during processing), it is RECOMMENDED that the user agent
          fall back to using any icons found in the <code>Document</code> of
          the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
          top-level browsing context</a>. For example, an <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#rel-icon">icon
          link type</a> and/or a <code>favicon.ico</code> can serve as suitable
          fallbacks.
        </p>
        <p>
          The <dfn>steps for processing the <code>icons</code> member</dfn> are
          given by the following algorithm. The algorithm takes a manifest, and
          a <a href="http://url.spec.whatwg.org/#concept-url">URL</a>
          <var>manifest URL</var>, which is the URL from which the
          <var>manifest</var> was fetched. This algorithm will return a list of
          icons objects <var>icons</var>, which can be empty.
        </p>
        <ol>
          <li>Let <var>icons</var> be an empty list.
          </li>
          <li>Let <var>unprocessed icons</var> be the result of calling the <a>
            [[\GetOwnProperty]]</a> internal method of <var>manifest</var> with
            argument "<code>icons</code>".
          </li>
          <li>If <var>unprocessed icons</var> is an <a title=
          "json-array">array</a>, then:
            <ol>
              <li>From unprocessed icons, filter out any <var>item</var> where
              <a>HasOwnProperty</a>(item,"src") returns <code>false</code>.
              </li>
              <li>For each <var>potential icon</var> in the array:
                <ol>
                  <li>Let <var>src</var> be the result of running the <a>steps
                  for processing the <code>src</code> member of an icon</a>
                  with <var>potential icon</var> and <var>manifest URL</var>.
                  </li>
                  <li>If <var>src</var> is <code>undefined</code>, move onto
                  the next item in <var>icons</var> (if any are left).
                  </li>
                  <li>Otherwise, let <var>icon</var> be an object with
                  properties <code>src</code>, <code>type</code>,
                  <code>sizes</code>, and <code>density</code>. All properties
                  initially set to <code>undefined</code>.
                  </li>
                  <li>Set <var>icon</var>'s <code>src</code> property to be
                  <var>src</var>.
                  </li>
                  <li>Let <var>type</var> be the result of running the <a>steps
                  for processing the <code>type</code> member of an icon</a>
                  passing <var>potential icon</var>.
                  </li>
                  <li>If <var>type</var> is not <code>undefined</code>, set
                  <var>icon</var>'s <code>type</code> property to be
                  <var>type</var>.
                  </li>
                  <li>Let <var>sizes</var> be the list that result from running
                  the <a>steps for processing a <code>sizes</code> member of an
                  icon</a> passing <var>potential icon</var>.
                  </li>
                  <li>If <var>sizes</var> is not <code>undefined</code>, set
                  <var>icon</var>'s <code>sizes</code> property to be
                  <var>sizes</var>.
                  </li>
                  <li>Let <var>density</var> be the result from running the <a>
                    steps for processing a <code>density</code> member of an
                    icon</a> are given by the passing <var>potential
                    icon</var>.
                  </li>
                  <li>If <var>density</var> is not <code>undefined</code>, set
                  <var>icon</var>'s <code>density</code> property to be
                  <var>value</var>.
                  </li>
                  <li>Append <var>icon</var> to <var>icons</var>.
                  </li>
                </ol>
              </li>
            </ol>
          </li>
          <li>Otherwise, if <var>unprocessed icons</var> is not an <a title=
          "json-array">array</a>:
            <ol>
              <li>
                <a>Issue a developer warning</a> that the type is not
                supported.
              </li>
            </ol>
          </li>
          <li>Return <var>icons</var>.
          </li>
        </ol>
        <p>
          If there are multiple equally appropriate icons in <var>icons</var>,
          a user agent MUST use the last one declared in order at the time that
          the user agent collected the list of <var>icons</var>. If the user
          agent tries to use an icon but that icon is determined, upon closer
          examination, to in fact be inappropriate (e.g. because its content
          type is unsupported), then the user agent MUST try the
          next-most-appropriate icon as determined by examining the <a title=
          "icon object">icon object's</a> members.
        </p>
      </section>
      <section>
        <h3>
          <code>display</code> member
        </h3>
        <p>
          The <dfn id="member-display"><code>display</code></dfn> member is a
          <a href="#json-string">string</a>, whose value is one of <a>display
          modes values</a>. The item represents the developer's preferred
          <a>display mode</a> for the web application. When the member is
          missing or erroneous, the user agent MUST use the <a>fallback display
          mode</a>.
        </p>
        <p>
          The <dfn>steps for processing the <code>display</code> member</dfn>
          are given by the following algorithm. The algorithm takes a manifest
          <var>manifest</var> as an argument, and returns a string.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>manifest</var>
          passing "<code>display</code>" as the argument.
          </li>
          <li>If <a>Type</a>(<var>value</var>) is not "string" or
          <var>value</var> is not part of the <a>display modes values</a>:
            <ol>
              <li>If <a>Type</a>(<var>value</var>) is not "undefined", <a>issue
              a developer warning</a> that the type is unsupported.
              </li>
              <li>Return the <a>fallback display mode</a>'s value.
              </li>
            </ol>
          </li>
          <li>Otherwise, <a>Trim</a>(<var>value</var>) and set <var>value</var>
          to be the result.
          </li>
          <li>If <var>value</var> is not a <a>display mode</a> that the user
          agent supports, set <var>value</var> to <var>value</var>'s
          <a>fallback display mode</a> and re-run this step.
          </li>
          <li>Return <var>value</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code>orientation</code> member
        </h3>
        <p>
          The <dfn id="member-orientation"><code>orientation</code></dfn>
          member is a <a href="#json-string">string</a> that serves as the
          <a href=
          "https://w3c.github.io/screen-orientation/#dfn-default-orientation">default
          orientation</a> for all <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
          top-level browsing contexts</a> of the web application. The possible
          values is one of the <a href=
          "https://w3c.github.io/screen-orientation/#idl-def-OrientationLockType">
          <dfn>OrientationLockType</dfn></a> enum defined in
          [[!SCREEN-ORIENTATION]].
        </p>
        <p>
          If the user agent honors the value of the <code>orientation</code>
          member as the <a href=
          "https://w3c.github.io/screen-orientation/#dfn-default-orientation">default
          orientation</a>, then that serves as the <a href=
          "https://w3c.github.io/screen-orientation/#dfn-default-orientation">default
          orientation</a> for the life of the web application (unless
          overridden by some other means at runtime). This means that the user
          agent MUST return the orientation to the <a href=
          "https://w3c.github.io/screen-orientation/#dfn-default-orientation">default
          orientation</a> any time the orientation is unlocked
          [[!SCREEN-ORIENTATION]] or the <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
          top-level browsing context</a> is <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#navigate">navigated</a>.
        </p>
        <p>
          Although the specification relies on the [[!SCREEN-ORIENTATION]]'s
          <a href=
          "https://w3c.github.io/screen-orientation/#idl-def-OrientationLockType">
          OrientationLockType</a>, it is OPTIONAL for a user agent to implement
          the [[!SCREEN-ORIENTATION]] API. Supporting the
          [[!SCREEN-ORIENTATION]] API is, of course, RECOMMENDED.
        </p>
        <p class="note">
          Once the web application is running, other means can change the
          orientation of a <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
          top-level browsing context</a> (such as via [[!SCREEN-ORIENTATION]]
          API).
        </p>
        <p>
          The <dfn>steps for processing the <code>orientation</code>
          member</dfn> are given by the following algorithm. The algorithm
          takes a <a>manifest</a> <var>manifest</var> and <a>display mode</a>
          <var>display mode</var> as an argument, and returns a string.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>manifest</var>
          with argument "<code>orientation</code>".
          </li>
          <li>If <a>Type</a>(<var>value</var>) is not "string":
            <ol>
              <li>If <a>Type</a>(<var>value</var>) is not "undefined", <a>issue
              a developer warning</a> that the type is not supported.
              </li>
              <li>Return the empty string.
              </li>
            </ol>
          </li>
          <li>Otherwise, <a>Trim</a>(<var>value</var>) and set <var>value</var>
          to be the result.
          </li>
          <li>If <var>value</var> is not one of the <a>OrientationLockType</a>
          enum values, or <var>value</var> is unsupported by the user agent, or
          the <var>value</var> cannot be used together with <var>display
          mode:</var>
            <ol>
              <li>
                <a>Issue a developer warning</a>.
              </li>
              <li>Return the empty string.
              </li>
            </ol>
          </li>
          <li>Return <var>value</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code>start_url</code> member
        </h3>
        <p>
          The <dfn title="member-url"><code>start_url</code></dfn> member is a
          <a title="json-string">string</a> that represents the <a href=
          "http://url.spec.whatwg.org/#concept-url">URL</a> that the developer
          would prefer the user agent <a href=
          "http://www.w3.org/html/wg/drafts/html/master/single-page.html#browsers">
          load</a> when the user launches the web application (e.g., when the
          user clicks on the icon of the web application from a device's
          application menu or homescreen).
        </p>
        <p>
          The <a title="member-url"><code>start_url</code></a> member is purely
          advisory, and a user agent MAY <a>ignore</a> it or provide the
          end-user the choice not to make use of it. A user agent MAY also
          allow the end-user to modify the URL when, for instance, a bookmark
          for the web application is being create or any time thereafter.
        </p>
        <p>
          The <dfn>steps for processing the <code>start_url</code> member</dfn>
          are given by the following algorithm. The algorithm takes a
          <a>manifest</a> <var>manifest</var>, a <a href=
          "http://url.spec.whatwg.org/#concept-url">URL</a> <var>manifest
          URL</var>, and a <a href=
          "http://url.spec.whatwg.org/#concept-url">URL</a> <var>origin
          URL</var>. This algorithm returns a [[!URL]].
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of the <var>manifest</var>
          with argument "<code>start_url</code>".
          </li>
          <li>Let <var>type</var> be <a>Type</a>(<var>value</var>).
          </li>
          <li>If <var>type</var> is not "string" or <var>value</var> is the
          empty string, then:
            <ol>
              <li>If <var>type</var> is not "<code>undefined</code>", <a>issue
              a developer warning</a> that the type is unsupported.
              </li>
              <li>Return a new [[!URL]] whose <var>input</var> is <var>origin
              URL</var>.
              </li>
            </ol>
          </li>
          <li>Let <var>url</var> be a new [[!URL]] using <var>value</var> as
          <var>input</var> and <var>manifest URL</var> as the <var>base</var>
          URL.
          </li>
          <li>If <var>url</var> is failure:
            <ul>
              <li>
                <a>Issue a developer warning</a>.
              </li>
              <li>Return a new [[!URL]] whose <var>input</var> is <var>origin
              URL</var>.
              </li>
            </ul>
          </li>
          <li>If url is not <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#same-origin">same
          origin</a> as <var>origin URL</var>:
            <ol>
              <li>
                <a>Issue a developer warning</a> that the
                <code>start_url</code> needs to be <a href=
                "http://www.whatwg.org/specs/web-apps/current-work/#same-origin">
                same-origin</a> as <code>Document</code> of the <a href=
                "http://www.whatwg.org/specs/web-apps/current-work/#top-level-browsing-context">
                top-level browsing context</a>.
              </li>
              <li>Return a new [[!URL]] whose <var>input</var> is <var>origin
              URL</var>.
              </li>
            </ol>
          </li>
          <li>Otherwise, return <var>url</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          Content security policy
        </h3>
        <p class="issue">
          The `<code>manifest-src</code>` hasn't yet been added to the CSP
          spec. However, a <a href=
          "https://github.com/w3c/webappsec/issues/29">feature request has been
          filed</a> and accepted by the Editor.
        </p>
        <p>
          Just like [[!HTML]] documents, a manifest can have an associated
          [[!CSP]] policy. The manifest's policy controls, for example, where
          resources like <a title="icon object">icons</a> can be loaded from
          (via the <code><a href=
          "https://w3c.github.io/webappsec/specs/content-security-policy/#directive-img-src">
          img-src</a></code> directive).
        </p>
        <p>
          A user agent MUST treat the a manifest's policy as independent of any
          policy applied to [[!HTML]] document. A manifest's [[!CSP]] policy
          can only be delivered over HTTP.
        </p>
        <div class="example">
          <figure>
            <img src="images/indipendent_policies.svg" width="224" height="332"
            alt="">
            <figcaption>
              The [[!CSP]] policy applied to a [[!HTML]] document is
              independent from, and does not interact with, the policy applied
              to the manifest. Where are manifest can be loaded from is
              controlled by the HTML's document's CSP policy.
            </figcaption>
          </figure>
        </div>
        <p>
          For [[!HTML]] document, [[!CSP]]'s <code>manifest-src</code>
          directive controls the sources from which a [[!HTML]] document can
          load a manifest from.
        </p>
        <div class="example">
          <figure class="exaple">
            <img src="images/manifest-src-directive.svg" width="704" height=
            "342" alt="">
            <figcaption>
              The `<code>manifest-src</code>` directive controls where an HTML
              document can load a manifest from. In this case, it's from
              "bar.com". In turn, bar.com applies its own policy to the
              manifest, which itself restricts where, for instance, <a title=
              "icon object">icons</a> can be loaded from. In this case, that is
              from "icons.com".
            </figcaption>
          </figure>
        </div>
      </section>
      <section class="informative">
        <h3>
          Extending the manifest
        </h3>
        <p>
          This specification is designed to be extensible. Other specifications
          are encouraged to define new members for the manifest. However, in
          doing so, please follow the conventions used in this specification.
          In particular, use the <a>extension point</a> to hook into the
          <a>steps for processing a manifest</a>. Also, be sure to specify the
          steps for processing your particular member in the manner set forth
          in this specification. This will help keep this part of the platform
          consistent.
        </p>
        <p>
          When specifying an new member, don't override or <a href=
          "http://annevankesteren.nl/2014/02/monkey-patch">monkey patch</a>
          anything defined in this specification. Also, don't assume your
          member will be processed before or after any other member. Keep your
          new member, and its processing, atomic and self contained.
        </p>
        <p>
          If you are writing a specification and temporarily want to patch this
          specification to help implementations along, <a href=
          "https://github.com/w3c/manifest/issues">file a bug</a> so the
          community is informed of what you are trying to do.
        </p>
      </section>
      <section id="proprietary-extensions" class="informative">
        <h3>
          Proprietary extensions to the manifest
        </h3>
        <p>
          Although proprietary extensions are undesirable, they can't
          realistically be avoided. As such, the RECOMMENDED way to add a
          proprietary extension is to use a vendor prefix.
        </p>
        <p>
          The following is an example of two hypothetical vendor extensions.
        </p>
        <pre class="example highlight json" title="vendor extensions">
{
  ...
  "webkit_fancy_feature": "some/url/img",
  "moz_awesome_thing": { ... }
  ...
}
</pre>
      </section>
      <section>
        <h3>
          Internationalization and localization
        </h3>
        <div class="issue">
          <p>
            We are currently discussing how to best support
            internationalization in the manifest. We are open to input on the
            best way to do this and our current thinking can be seen here:
          </p>
          <ul>
            <li>
              <a href="https://github.com/w3c/manifest/issues/211">Allow name
              to be a String or Language Map</a>
            </li>
          </ul>
        </div>
      </section>
    </section>
    <section>
      <h2>
        Icon object and its members
      </h2>
      <p>
        Each <dfn>icon object</dfn> represents an icon for an application,
        suitable to use in various contexts (e.g., an application menu).
      </p>
      <p class="note">
        For all intents and purposes, an <a>icon object</a> is functionally
        equivalent to <code>link</code> element whose <code>rel</code>
        attribute is icon in a <code>Document</code>.
      </p>
      <section>
        <h3>
          Content security policy of icon object
        </h3>
        <p>
          Fetching icons is governed by the <code>img-src</code> CSP directive
          as applied to the manifest.
        </p>
        <div class="example">
          <p>
            For example, the following policy restricts loading icons the
            <code>icons.example.com</code> domain. Thus, trying to load icons
            from "other.com" would fail.
          </p>
          <pre class="highlight">
HTTP/1.1 200 OK
Content-Type: application/json
Content-Security-Policy: img-src icons.example.com;

{
    "name": "custom manifest",
    "start_url": "http://boo",
    "icons": [{
        "src": "//icons.example.com/lowres"
      },
      {
        "src": "//other.com/hi-res"
      }]
}
</pre>
        </div>
      </section>
      <section>
        <h3>
          <code>density</code> member
        </h3>
        <p>
          The <dfn id="icon-densitiy">density</dfn> member of an icon is the
          device pixel density for which this icon was designed. The device
          pixel density is expressed as the number of dots per 'px' unit
          (equivalent to a dppx as defined in [[!css3-values]]). The value is a
          positive number greater than 0. If the developer omits the value, the
          user agent assumes the value <code>1.0</code>.
        </p>
        <p>
          The <dfn>steps for processing a <code>density</code> member of an
          icon</dfn> are given by the following algorithm. The algorithm thanks
          an <var>icon</var> object as an argument and returns a positive
          number.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          [[\GetOwnProperty]] internal method of <var>icon</var> passing
          "<code>density</code>" as the argument.
          </li>
          <li>Let <var>result</var> be the result of
          <a>parseFloat</a>(<var>value</var>);
          </li>
          <li>If <var>result</var> is <code>NaN</code>, +, or less than or
          equal to +0, let <var>result</var> be 1.0.
          </li>
          <li>Return <var>result</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code>sizes</code> member
        </h3>
        <p>
          The <dfn title="icon-sizes">sizes</dfn> member is a <a title=
          "json-string">string</a> consisting of an <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#unordered-set-of-unique-space-separated-tokens">
          unordered set of unique space-separated tokens</a> which are <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#ascii-case-insensitive">
          ASCII case-insensitive</a> that represents the dimensions of an icon
          for visual media. Each keyword is either an <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#ascii-case-insensitive">
          ASCII case-insensitive</a> match for the string "<a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#attr-link-sizes-any">any</a>",
          or a value that consists of two <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#valid-non-negative-integer"
          title="valid non-negative integer">valid non-negative integers</a>
          that do not have a leading U+0030 DIGIT ZERO (0) character and that
          are separated by a single U+0078 LATIN SMALL LETTER X or U+0058 LATIN
          CAPITAL LETTER X character. The keywords represent icon sizes in raw
          pixels (as opposed to CSS pixels). When multiple <a title=
          "icon object">icon objects</a> are available, a user agent can use
          the value to decide which icon is most suitable for a display context
          (and ignore any that are inappropriate).
        </p>
        <p>
          The <dfn>steps for processing a <code>sizes</code> member of an
          icon</dfn> are given by the following algorithm. The algorithm takes
          an <a>icon object</a> <var>icon</var>. This algorithm will return a
          set.
        </p>
        <ol>
          <li>Let <var>sizes</var> be an empty set.
          </li>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>icon</var> passing
          "<var>sizes</var>" as the argument.
          </li>
          <li>Let <var>type</var> be <a>Type</a>(<var>value</var>).
          </li>
          <li>If <var>type</var> is not "string", then:
            <ol>
              <li>If <var>type</var> is not "<code>undefined</code>", issue a
              developer warning that the type is unsupported.
              </li>
            </ol>
          </li>
          <li>Otherwise, parse <var>value</var> as if it was a [[!HTML]] <code>
            <a href=
            "http://www.whatwg.org/specs/web-apps/current-work/#attr-link-sizes">
            sizes</a></code> attribute and let <var>keywords</var> be the
            result.
          </li>
          <li>For each <var>keyword</var> in <var>keywords</var>:
            <ol>
              <li>Convert <var>keyword</var> <a href=
              "http://www.whatwg.org/specs/web-apps/current-work/#converted-to-ascii-lowercase">
                to ASCII lowercase</a> and add the resulting string to
                <var>sizes</var>.
              </li>
            </ol>
          </li>
          <li>Return <var>sizes</var>.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code>src</code> member
        </h3>
        <p>
          The <dfn title="icon-density">src</dfn> member of an icon is a URL
          from which a user agent can fetch the icon's data.
        </p>
        <p>
          The <dfn>steps for processing the <code>src</code> member of an
          icon</dfn> are given by the following algorithm. The algorithm takes
          a <a>icon object</a> <var>icon</var>, and a <a href=
          "http://url.spec.whatwg.org/#concept-url">URL</a> <var>manifest
          URL</var>, which is the URL from which the <var>manifest</var> was
          fetched. This algorithm will return a <a href=
          "http://url.spec.whatwg.org/#concept-url">URL</a> or
          <code>undefined</code>.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>icon</var> passing
          "<code>src</code>" as the argument.
          </li>
          <li>Let <var>type</var> be <a>Type</a>(<var>value</var>).
          </li>
          <li>If <var>type</var> is not "string", then:
            <ol>
              <li>If <var>type</var> is not "<code>undefined</code>", issue a
              developer warning that the type is unsupported.
              </li>
              <li>Return <code>undefined</code>.
              </li>
            </ol>
          </li>
          <li>
            <a href="http://url.spec.whatwg.org/#parsing">Parse</a>
            <var>value</var> using <var>manifest URL</var> as the base URL and
            return the result.
          </li>
        </ol>
      </section>
      <section>
        <h3>
          <code>type</code> member
        </h3>
        <p>
          The <dfn title="icon-type">type</dfn> member of an icon is a hint as
          to the media type of the icon. The purpose of this member is to allow
          a user agent to ignore icons of media types it does not support.
        </p>
        <p>
          There is no default MIME type for icon objects. However, for the
          purposes of <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#concept-link-type-sniffing">
          determining the type of the resource</a>, user agents must expect the
          resource to be an image.
        </p>
        <p>
          The <dfn>steps for processing the <code>type</code> member of an
          icon</dfn> are given by the following algorithm. The algorithm takes
          an <var>icon</var> object as an argument, and returns either a string
          or <code>undefined</code>.
        </p>
        <ol>
          <li>Let <var>value</var> be the result of calling the
          <a>[[\GetOwnProperty]]</a> internal method of <var>potential
          icon</var> passing "<code>type</code>" as the argument.
          </li>
          <li>Let <var>type</var> be <a>Type</a>(<var>value</var>).
          </li>
          <li>If <var>type</var> is not "string", then:
            <ol>
              <li>If <var>type</var> is not "<code>undefined</code>", issue a
              developer warning that the type is unsupported.
              </li>
              <li>Return <code>undefined</code>.
              </li>
            </ol>
          </li>
          <li>Trim(<var>value</var>) and set <var>value</var> to be resulting
          string.
          </li>
          <li>If <var>value</var> is not a <a href=
          "http://www.whatwg.org/specs/web-apps/current-work/#valid-mime-type">
            valid MIME type</a> or the value of <var>type</var> is not a
            supported media format, issue a developer warning and return
            <code>undefined</code>.
          </li>
          <li>Return <var>value</var>.
          </li>
        </ol>
      </section>
    </section>
    <section>
      <h2>
        IANA considerations
      </h2>
      <p>
        The following registration is for community review and will be
        submitted to the IESG for review, approval, and registration with IANA.
      </p>
      <section>
        <h3>
          The "manifest.json" well-known URI
        </h3>
        <dl>
          <dt>
            URI suffix:
          </dt>
          <dd>
            manifest.json
          </dd>
          <dt>
            Change controller:
          </dt>
          <dd>
            <a href="www.w3.org/2008/webapps/">Web Applications (WebApps)
            Working Group</a>
          </dd>
          <dt>
            Specification document(s):
          </dt>
          <dd>
            This document is the relevant specification.
          </dd>
        </dl>
      </section>
      <section>
        <h3>
          Media type registration
        </h3>
        <p>
          This section contains the required text for MIME media type
          registration with IANA.
        </p>
        <p>
          The <dfn>media type for a manifest</dfn> is
          <code>application/manifest+json</code>.
        </p>
        <p>
          If the protocol over which the manifest is transferred supports the
          [[!MIME-TYPES]] specification (e.g. HTTP), it is RECOMMENDED that the
          manifest be labeled with the <a>media type for a manifest</a>.
        </p>
        <dl>
          <dt>
            Type name:
          </dt>
          <dd>
            application
          </dd>
          <dt>
            Subtype name:
          </dt>
          <dd>
            manifest+json
          </dd>
          <dt>
            Required parameters:
          </dt>
          <dd>
            N/A
          </dd>
          <dt>
            Optional parameters:
          </dt>
          <dd>
            N/A
          </dd>
          <dt>
            Encoding considerations:
          </dt>
          <dd>
            Same as for application/json
          </dd>
          <dt>
            Security considerations:
          </dt>
          <dd>
            <p>
              As the manifest format is JSON and will commonly be encoded using
              [[!UNICODE]], the security considerations described in
              [[!ECMA-404]] and [[!UNICODE-SECURITY]] apply. In addition,
              implementors need to impose their own implementation-specific
              limits on the values of otherwise unconstrained member types,
              e.g. to prevent denial of service attacks, to guard against
              running out of memory, or to work around platform-specific
              limitations.
            </p>
            <p>
              Web applications will generally contain ECMAScript, HTML, CSS
              files, and other media, which are executed in a sand-boxed
              environment. As such, implementors need to be aware of the
              security implications for the types they support. Specifically,
              implementors need to consider the security implications outlined
              in at least the following specifications: [[!CSS-MIME]],
              [[!ECMAScript-MIME]], [[!HTML]].
            </p>
            <p>
              As web applications can contain content that is able to
              simultaneously interact with the local device and a remote host,
              implementors need to consider the privacy implications resulting
              from exposing private information to a remote host. Mitigation
              and in-depth defensive measures are an implementation
              responsibility and not prescribed by this specification. However,
              in designing these measures, implementors are advised to enable
              user awareness of information sharing, and to provide easy access
              to interfaces that enable revocation of permissions.
            </p>
            <p>
              As this specification allows for the declaration of URLs within
              certain members of a manifest, implementors need to consider the
              security considerations discussed in the [[!URL]] specification.
              Implementations intending to display <abbr title=
              "Internationalized Resource Identifiers">IRIs</abbr> and
              <abbr title="Internationalized domain name">IDNA</abbr> addresses
              found in the manifest are strongly encouraged to follow the
              security advice given in [[!UNICODE-SECURITY]].
            </p>
          </dd>
          <dt>
            Applications that use this media type:
          </dt>
          <dd>
            Web browsers
          </dd>
          <dt>
            Additional information:
          </dt>
          <dd>
            <dl>
              <dt>
                Magic number(s):
              </dt>
              <dd>
                N/A
              </dd>
              <dt>
                File extension(s):
              </dt>
              <dd>
                .json, .manifest
              </dd>
              <dt>
                Macintosh file type code(s):
              </dt>
              <dd>
                TEXT
              </dd>
            </dl>
          </dd>
          <dt>
            Person &amp; email address to contact for further information:
          </dt>
          <dd>
            The <a href="http://www.w3.org/2008/webapps/" rel="nofollow">Web
            Applications (WebApps) Working Group</a> can be contacted at
            <a href="http://lists.w3.org/Archives/Public/public-webapps/" rel=
            "nofollow">public-webapps@w3.org</a>.
          </dd>
          <dt>
            Intended usage:
          </dt>
          <dd>
            COMMON
          </dd>
          <dt>
            Restrictions on usage:
          </dt>
          <dd>
            none
          </dd>
          <dt>
            Author:
          </dt>
          <dd>
            W3C's Web Applications (WebApps) Working Group.
          </dd>
          <dt>
            Change controller:
          </dt>
          <dd>
            W3C.
          </dd>
        </dl>
      </section>
    </section>
    <section id="conformance" data-status="done">
      <p>
        There is only one class of product that can claim conformance to this
        specification: a <dfn>user agent</dfn>.
      </p>
    </section>
    <section class="appendix">
      <h2>
        Acknowledgments
      </h2>
      <p>
        This document reuses text from the [[!HTML]] specification, edited by
        Ian Hickson, as permitted by the license of that specification.
      </p>
    </section>
  </body>
</html>
